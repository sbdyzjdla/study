# 스프링 고급편

### ThreadLocal
싱글톤 객체의 필드나 static 필드와 같이 하나만 존재하는 필드에 
여러 쓰레드가 접근하면 동시성 이슈가 발생할수 있다
이때 ThreadLocal을 사용하면 동시성 이슈를 해결할수있다

쓰레드로컬은 해당 쓰레드만 접근할수있는 저장소다.
Ex) thread-A, thread-B라는 2개의 쓰레드가 있을때 각각 전용 전용 쓰레드 보관소에 값을 저장해 두고 반환해준다

#### ThreadLocal의 주의사항
* WAS처럼 쓰레드풀을 사용하는 환경에서 사용후 ThreadLocal.remove() 함수로 제거해주지 않으면 메모리에 데이터가 계속 남아있어 메모리 누수가 발생할수있다
* 이전 사용자가 thread-A라는 쓰레드를 할당받아 쓰레드 로컬에 데이터를 저장후 제거되지 않았을때 그다음 사용자가 우연히 thread-A를 할당받아 쓰레드 로컬을 조회할경우
현재 사용자는 이전 사용자의 정보를 받게되는 문제가 발생할수도 있다